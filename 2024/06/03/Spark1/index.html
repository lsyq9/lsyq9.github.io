<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Spark基础环境配置 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="一、基础环境：1、主机名：   序号 主机名 IP Address    01 master 192.168.30.10   02 slave1 192.168.30.11   03 slave2 192.168.30.12   2、配置hosts：（注：三台服务器同时配置） 测试：（每台服务器都测试）    3、安装NTP：（master做NTP服务器，slave1、slave2同步master">
<meta property="og:type" content="article">
<meta property="og:title" content="Spark基础环境配置">
<meta property="og:url" content="http://example.com/2024/06/03/Spark1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一、基础环境：1、主机名：   序号 主机名 IP Address    01 master 192.168.30.10   02 slave1 192.168.30.11   03 slave2 192.168.30.12   2、配置hosts：（注：三台服务器同时配置） 测试：（每台服务器都测试）    3、安装NTP：（master做NTP服务器，slave1、slave2同步master">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image002.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image004.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image006.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image008.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image010.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image012.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image014.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image016.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image018.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image020.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image022.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image024.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image026.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image028.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image030.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image032.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image034.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image036.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image038.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image040.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image042.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image044.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image046.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image048.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image050.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image052.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image054.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image056.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image058.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image060.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image062.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image064.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image066.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image068.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image070.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image072.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image074.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image076.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image078.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image080.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image082.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image084.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image086.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image088.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image090.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image092.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image094.gif">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image096.jpg">
<meta property="og:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image098.gif">
<meta property="article:published_time" content="2024-06-03T04:56:35.000Z">
<meta property="article:modified_time" content="2024-06-04T00:46:56.041Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="基础环境，JDK，Hadoop，Zookeeper">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:\Users\%E8%8A%B1%E5%B0%91%E5%A5%B3\blog\source_posts\Spark1.assets\clip_image002.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Spark1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/03/Spark1/" class="article-date">
  <time class="dt-published" datetime="2024-06-03T04:56:35.000Z" itemprop="datePublished">2024-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Spark基础环境配置
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一、基础环境："><a href="#一、基础环境：" class="headerlink" title="一、基础环境："></a>一、基础环境：</h1><h2 id="1、主机名："><a href="#1、主机名：" class="headerlink" title="1、主机名："></a>1、主机名：</h2><table>
<thead>
<tr>
<th>序号</th>
<th>主机名</th>
<th>IP Address</th>
</tr>
</thead>
<tbody><tr>
<td>01</td>
<td>master</td>
<td>192.168.30.10</td>
</tr>
<tr>
<td>02</td>
<td>slave1</td>
<td>192.168.30.11</td>
</tr>
<tr>
<td>03</td>
<td>slave2</td>
<td>192.168.30.12</td>
</tr>
</tbody></table>
<h2 id="2、配置hosts：（注：三台服务器同时配置）"><a href="#2、配置hosts：（注：三台服务器同时配置）" class="headerlink" title="2、配置hosts：（注：三台服务器同时配置）"></a>2、配置hosts：（注：三台服务器同时配置）</h2><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image002.jpg" alt="img"></p>
<p>测试：（每台服务器都测试）</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image004.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image006.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image008.jpg" alt="img"></p>
<h2 id="3、安装NTP：（master做NTP服务器，slave1、slave2同步master）"><a href="#3、安装NTP：（master做NTP服务器，slave1、slave2同步master）" class="headerlink" title="3、安装NTP：（master做NTP服务器，slave1、slave2同步master）"></a>3、安装NTP：（master做NTP服务器，slave1、slave2同步master）</h2><p>（1）matser： yum -y install ntp </p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image010.jpg" alt="img"></p>
<p>systemctl enable ntpd &amp;&amp; systemctl start ntpd </p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image012.jpg" alt="img"></p>
<p>三台服务器需执行以上命令。</p>
<p>Server:</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image014.jpg" alt="img"></p>
<p>Client:</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image016.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image018.jpg" alt="img"></p>
<p>检查：（master、slave1、slave2）</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image020.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image022.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image024.jpg" alt="img"></p>
<h2 id="4、配置SSH免密码"><a href="#4、配置SSH免密码" class="headerlink" title="4、配置SSH免密码"></a>4、配置SSH免密码</h2><h3 id="（1）所有节点分别生成私有密钥"><a href="#（1）所有节点分别生成私有密钥" class="headerlink" title="（1）所有节点分别生成私有密钥"></a>（1）所有节点分别生成私有密钥</h3><p>ssh-keygen -t dsa -P ‘’ -f &#x2F;root&#x2F;.ssh&#x2F;id_dsa</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image026.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image028.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image030.jpg" alt="img"></p>
<h3 id="（2）将公钥文件复制为authorized-keys文件"><a href="#（2）将公钥文件复制为authorized-keys文件" class="headerlink" title="（2）将公钥文件复制为authorized_keys文件"></a>（2）将公钥文件复制为authorized_keys文件</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image032.jpg" alt="img"></p>
<h3 id="（3）mater主机连接自己，做SSH内环测试"><a href="#（3）mater主机连接自己，做SSH内环测试" class="headerlink" title="（3）mater主机连接自己，做SSH内环测试"></a>（3）mater主机连接自己，做SSH内环测试</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image034.gif" alt="img"></p>
<h3 id="（4）slave1、slave2节点将master公钥文件复制本机（注：密码验证）"><a href="#（4）slave1、slave2节点将master公钥文件复制本机（注：密码验证）" class="headerlink" title="（4）slave1、slave2节点将master公钥文件复制本机（注：密码验证）"></a>（4）slave1、slave2节点将master公钥文件复制本机（注：密码验证）</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image036.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image038.jpg" alt="img"></p>
<h3 id="（5）将master节点公钥文件追加各个节点（slave1、2）authorized-keys文件"><a href="#（5）将master节点公钥文件追加各个节点（slave1、2）authorized-keys文件" class="headerlink" title="（5）将master节点公钥文件追加各个节点（slave1、2）authorized_keys文件"></a>（5）将master节点公钥文件追加各个节点（slave1、2）authorized_keys文件</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image040.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image042.jpg" alt="img"></p>
<h3 id="（6）master测试登录slave1、slave2（首次，需要“yes”确认连接）"><a href="#（6）master测试登录slave1、slave2（首次，需要“yes”确认连接）" class="headerlink" title="（6）master测试登录slave1、slave2（首次，需要“yes”确认连接）"></a>（6）master测试登录slave1、slave2（首次，需要“yes”确认连接）</h3><h3 id="（7）同样操作，将slave1、2的id-dsa-pub传到master，追加authorized-keys"><a href="#（7）同样操作，将slave1、2的id-dsa-pub传到master，追加authorized-keys" class="headerlink" title="（7）同样操作，将slave1、2的id_dsa.pub传到master，追加authorized.keys"></a>（7）同样操作，将slave1、2的id_dsa.pub传到master，追加authorized.keys</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image044.jpg" alt="img"></p>
<h2 id="5、安装、配置JDK"><a href="#5、安装、配置JDK" class="headerlink" title="5、安装、配置JDK"></a>5、安装、配置JDK</h2><p>（1）mkdir -pv &#x2F;usr&#x2F;java </p>
<p>（2）tar -zxvf jdk-8u171-linux-x64.tar.gz -C &#x2F;usr&#x2F;java&#x2F;</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image046.jpg" alt="img"></p>
<p>（3）vi &#x2F;etc&#x2F;profile</p>
<p>填写以下内容：</p>
<p>export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_171</p>
<p>export CLASSPATH&#x3D;#JAVA_HOME&#x2F;lib&#x2F;</p>
<p>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</p>
<p>export PATH JAVA_HOME CLASSPATH </p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image048.jpg" alt="img"></p>
<p>生效环境变量，并查看jdk版本：</p>
<p>source &#x2F;etc&#x2F;profile </p>
<p>java -version </p>
<p>将master主机的jdk目录，分别拷贝slave1、slave2主机：</p>
<p>scp -r root@master:&#x2F;usr&#x2F;java  &#x2F;usr&#x2F;</p>
<p>将slave1、slave2配置jdk；并生效环境变量，查看jdk版本验证：</p>
<p>export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_171</p>
<p>export CLASSPATH&#x3D;#JAVA_HOME&#x2F;lib&#x2F;</p>
<p>export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</p>
<p>export PATH JAVA_HOME CLASSPATH </p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image050.jpg" alt="img"></p>
<h1 id="二、zookeeper"><a href="#二、zookeeper" class="headerlink" title="二、zookeeper"></a>二、zookeeper</h1><h2 id="1、修改主机名-与-IP地址映射设置（master、slave1、2都修改）"><a href="#1、修改主机名-与-IP地址映射设置（master、slave1、2都修改）" class="headerlink" title="1、修改主机名 与 IP地址映射设置（master、slave1、2都修改）"></a>1、修改主机名 与 IP地址映射设置（master、slave1、2都修改）</h2><table>
<thead>
<tr>
<th>vi &#x2F;etc&#x2F;hosts</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>192.168.30.10</td>
<td>master</td>
<td>master.root.</td>
</tr>
<tr>
<td>192.168.30.11</td>
<td>slave1</td>
<td>slave1.root</td>
</tr>
<tr>
<td>192.168.30.12</td>
<td>slave2</td>
<td>slave2.root</td>
</tr>
</tbody></table>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image052.jpg" alt="img"></p>
<h2 id="2、master节点执行操作："><a href="#2、master节点执行操作：" class="headerlink" title="2、master节点执行操作："></a>2、master节点执行操作：</h2><h3 id="（1）创建zookeeper目录、解压解包；复制zoo-cfg："><a href="#（1）创建zookeeper目录、解压解包；复制zoo-cfg：" class="headerlink" title="（1）创建zookeeper目录、解压解包；复制zoo.cfg："></a>（1）创建zookeeper目录、解压解包；复制zoo.cfg：</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image054.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image056.jpg" alt="img"></p>
<p>或 egrep -v ‘(^#)’ zoo_sample.cfg | tee -a zoo.cfg</p>
<h3 id="（2）配置zoo-cfg"><a href="#（2）配置zoo-cfg" class="headerlink" title="（2）配置zoo.cfg"></a>（2）配置zoo.cfg</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image058.jpg" alt="img"></p>
<p>vi zoo.cfg </p>
<p>tickTime&#x3D;2000</p>
<p>initLimit&#x3D;10</p>
<p>syncLimit&#x3D;5</p>
<p>dataDir&#x3D;&#x2F;tmp&#x2F;zookeeper</p>
<p>clientPort&#x3D;2181</p>
<p>dataDir&#x3D;&#x2F;usr&#x2F;zookeeper&#x2F;zookeeper-3.4.10&#x2F;zkdata</p>
<p>dataLogDir&#x3D;&#x2F;usr&#x2F;zookeeper&#x2F;zookeeper-3.4.10&#x2F;zkdatalog</p>
<p>server.1&#x3D;master:2888:3888</p>
<p>server.2&#x3D;slave1:2888:3888</p>
<p>server.3&#x3D;slave2:2888:3888</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image060.gif" alt="555"></p>
<h3 id="（3）在zookeeper目录中，创建zkdata、zkdatalog两个目录"><a href="#（3）在zookeeper目录中，创建zkdata、zkdatalog两个目录" class="headerlink" title="（3）在zookeeper目录中，创建zkdata、zkdatalog两个目录"></a>（3）在zookeeper目录中，创建zkdata、zkdatalog两个目录</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image062.jpg" alt="img"></p>
<h3 id="（4）进入zkdata目录，创建文件myid："><a href="#（4）进入zkdata目录，创建文件myid：" class="headerlink" title="（4）进入zkdata目录，创建文件myid："></a>（4）进入zkdata目录，创建文件myid：</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image064.jpg" alt="img"></p>
<h3 id="（5）将zookeeper目录分别slave1、slave2："><a href="#（5）将zookeeper目录分别slave1、slave2：" class="headerlink" title="（5）将zookeeper目录分别slave1、slave2："></a>（5）将zookeeper目录分别slave1、slave2：</h3><p>scp -r &#x2F;usr&#x2F;zookeeper&#x2F; root@slave1:&#x2F;usr</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image066.jpg" alt="img"></p>
<p>scp -r &#x2F;usr&#x2F;zookeeper&#x2F; root@slave2:&#x2F;usr</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image068.jpg" alt="img"></p>
<h3 id="（6）设置-myid"><a href="#（6）设置-myid" class="headerlink" title="（6）设置 myid"></a>（6）设置 myid</h3><p>配置的 dataDir 指定的目录下面，创建一个 myid 文件，里面内容为一个数字，用来标识当前主机，conf&#x2F;zoo.cfg 文件中配置的server.X 中 X 为什么数字，则 myid 文件中就输入这个数字。</p>
<p>slave1 中为 2</p>
<p>slave2 中为 3</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image070.jpg" alt="img"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image072.jpg" alt="img"></p>
<h3 id="（7）配置环境变量，并启动zookeeper（注：master、slave1、slave2）："><a href="#（7）配置环境变量，并启动zookeeper（注：master、slave1、slave2）：" class="headerlink" title="（7）配置环境变量，并启动zookeeper（注：master、slave1、slave2）："></a>（7）配置环境变量，并启动zookeeper（注：master、slave1、slave2）：</h3><p>export ZOOKEEPER_HOME&#x3D;&#x2F;usr&#x2F;zookeeper&#x2F;zookeeper-3.4.10</p>
<p>PATH&#x3D;$PATH:$ZOOKEEPER_HOME&#x2F;bin</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image074.jpg" alt="img"></p>
<p>source &#x2F;etc&#x2F;profile</p>
<h3 id="（8）启动zookeeper集群"><a href="#（8）启动zookeeper集群" class="headerlink" title="（8）启动zookeeper集群"></a>（8）启动zookeeper集群</h3><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image076.jpg" alt="img"></p>
<h1 id="三、安装Hadoop"><a href="#三、安装Hadoop" class="headerlink" title="三、安装Hadoop"></a>三、安装Hadoop</h1><h2 id="1、创建-usr-hadoop目录、解压解包hadoop：（master节点操作）"><a href="#1、创建-usr-hadoop目录、解压解包hadoop：（master节点操作）" class="headerlink" title="1、创建&#x2F;usr&#x2F;hadoop目录、解压解包hadoop：（master节点操作）"></a>1、创建&#x2F;usr&#x2F;hadoop目录、解压解包hadoop：（master节点操作）</h2><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image078.gif" alt="739a645a92f050b2f7621a0d2347516"></p>
<p>将hadoop-2.7.3.tar.gz 解压解包放置&#x2F;usr&#x2F;hadoop目录</p>
<p>tar -zxvf hadoop-2.7.3.tar.gz -C &#x2F;usr&#x2F;hadoop&#x2F;</p>
<h2 id="2、配置hadoop环境变量：（注：master、slave1、slave2均操作）"><a href="#2、配置hadoop环境变量：（注：master、slave1、slave2均操作）" class="headerlink" title="2、配置hadoop环境变量：（注：master、slave1、slave2均操作）"></a>2、配置hadoop环境变量：（注：master、slave1、slave2均操作）</h2><p>vi &#x2F;etc&#x2F;profile </p>
<p>export HADOOP_HOME&#x3D;&#x2F;usr&#x2F;hadoop&#x2F;hadoop-2.7.3&#x2F;</p>
<p>export CLASSPATH&#x3D;$CLASSPATH:$HADOOP_HOME&#x2F;lib</p>
<p>export PATH&#x3D;$PATH:$HADOOP_HOME&#x2F;bin</p>
<p>source &#x2F;etc&#x2F;profile </p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image080.gif" alt="edea1819d194e4225e67db1d3242aca"></p>
<h2 id="3、编辑hadoop环境配置文件hadoop-env-sh"><a href="#3、编辑hadoop环境配置文件hadoop-env-sh" class="headerlink" title="3、编辑hadoop环境配置文件hadoop-env.sh"></a>3、编辑hadoop环境配置文件hadoop-env.sh</h2><p>路径：&#x2F;usr&#x2F;hadoop&#x2F;hadoop-2.7.3&#x2F;etc&#x2F;hadoop</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image082.gif" alt="d08312cfc2cba2d400f8a6d7ffffd7d"></p>
<p>输入内容：export JAVA_HOME&#x3D;&#x2F;usr&#x2F;java&#x2F;jdk1.8.0_171</p>
<h2 id="3、编辑core-site-xml（注：配置文件在当前路径下）"><a href="#3、编辑core-site-xml（注：配置文件在当前路径下）" class="headerlink" title="3、编辑core-site.xml（注：配置文件在当前路径下）"></a>3、编辑core-site.xml（注：配置文件在当前路径下）</h2><p>填写以下配置文件：</p>
<configuration>

<p>​    <property></p>
<p>​        <name>fs.default.name</name></p>
<p>​        <value>hdfs:&#x2F;&#x2F;master:9000</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>hadoop.tmp.dir</name></p>
<p>​        <value>&#x2F;usr&#x2F;hadoop&#x2F;hadoop-2.7.3&#x2F;hdfs&#x2F;tmp</value></p>
<p>​        <description>A base for other temporary directories.</description></p>
<p>​    </property></p>
<p>​     <property></p>
<p>​        <name>io.file.buffer.size</name></p>
<p>​        <value>131072</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>fs.checkpoint.period</name></p>
<p>​        <value>60</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>fs.checkpoint.size</name></p>
<p>​        <value>67108864</value></p>
<p>​    </property></p>
</configuration>

 

<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image084.gif" alt="img"></p>
<h2 id="4、编辑yarn-site-xml：（注：配置文件路径在当前路径下）"><a href="#4、编辑yarn-site-xml：（注：配置文件路径在当前路径下）" class="headerlink" title="4、编辑yarn-site.xml：（注：配置文件路径在当前路径下）"></a>4、编辑yarn-site.xml：（注：配置文件路径在当前路径下）</h2><configuration>

<p>​    <property></p>
<p>​        <name>yarn.resourcemanager.address</name></p>
<p>​        <value>master:18040</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.resourcemanager.scheduler.address</name></p>
<p>​        <value>master:18030</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.resourcemanager.webapp.address</name></p>
<p>​        <value>master:18088</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.resourcemanager.resource-tracker.address</name></p>
<p>​        <value>master:18025</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.resourcemanager.admin.address</name></p>
<p>​        <value>master:18141</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.nodemanager.aux-services</name></p>
<p>​        <value>mapreduce_shuffle</value></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>yarn.nodemanager.auxservices.mapreduce.shuffle.class</name></p>
<p>​        <value>org.apache.hadoop.mapred.ShuffleHandler</value></p>
<p>​    </property></p>
<!-- Site specific YARN configuration properties -->

</configuration>

<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image086.gif" alt="img"></p>
<h2 id="5、编写slave文件与-master文件："><a href="#5、编写slave文件与-master文件：" class="headerlink" title="5、编写slave文件与 master文件："></a>5、编写slave文件与 master文件：</h2><p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image088.gif" alt="img"></p>
<h2 id="6、配置hdfs-site-xml"><a href="#6、配置hdfs-site-xml" class="headerlink" title="6、配置hdfs-site.xml"></a>6、配置hdfs-site.xml</h2><configuration>

<p>​    <property></p>
<p>​        <name>dfs.replication</name></p>
<p>​        <value>2</value></p>
<p>​    </property></p>
<p>​     <property></p>
<p>​        <name>dfs.namenode.name.dir</name></p>
<p>​        <value>file:&#x2F;usr&#x2F;hadoop&#x2F;hadoop-2.7.3&#x2F;hdfs&#x2F;name</value></p>
<p>​        <final>true</final></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>dfs.datanode.data.dir</name></p>
<p>​        <value>file:&#x2F;usr&#x2F;hadoop&#x2F;hadoop-2.7.3&#x2F;hdfs&#x2F;data</value></p>
<p>​        <final>true</final></p>
<p>​    </property></p>
<p>​    <property></p>
<p>​        <name>dfs.namenode.secondary.http-address</name></p>
<p>​        <value>master:9001</value></p>
<p>​    </property></p>
<p>​     <property></p>
<p>​        <name>dfs.webhdfs.enabled</name></p>
<p>​        <value>true</value></p>
<p>​    </property></p>
<p>​     <property></p>
<p>​        <name>dfs.permissions</name></p>
<p>​        <value>false</value></p>
<p>​    </property></p>
</configuration>

<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image090.gif" alt="img"></p>
<h2 id="7、编辑mapred-site-xml"><a href="#7、编辑mapred-site-xml" class="headerlink" title="7、编辑mapred-site.xml"></a>7、编辑mapred-site.xml</h2><p>将模板mapred-site.xml.template 复制为 mapred-site.xml</p>
<p> cp mapred-site.xml.template mapred-site.xml</p>
<p>编写mapred-site.xml 填写以下内容：</p>
<p>​    <property></p>
<p>​        <name>mapreduce.framework.name</name></p>
<p>​        <value>yarn</value></p>
<p>​    </property></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image092.gif" alt="img"></p>
<h2 id="8、向slave1、slave2分发Hadoop目录："><a href="#8、向slave1、slave2分发Hadoop目录：" class="headerlink" title="8、向slave1、slave2分发Hadoop目录："></a>8、向slave1、slave2分发Hadoop目录：</h2><p>scp -r &#x2F;usr&#x2F;hadoop root@slave1:&#x2F;usr&#x2F;</p>
<p>scp -r &#x2F;usr&#x2F;hadoop root@slave2:&#x2F;usr&#x2F;</p>
<h2 id="9、master节点中格式化hadoop"><a href="#9、master节点中格式化hadoop" class="headerlink" title="9、master节点中格式化hadoop"></a>9、master节点中格式化hadoop</h2><p><strong>执行： hdfs namenode -format</strong></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image094.gif" alt="img"></p>
<p>访问master节点  master:50070 （注：50070 是hdfs的Web管理页面）</p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image096.jpg" alt="b3ff08f9843dc8f48f97ca6c52a3ed2"></p>
<p><img src="C:\Users\花少女\blog\source_posts\Spark1.assets\clip_image098.gif" alt="222"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/03/Spark1/" data-id="clwzoozpk0000tgnohisb7cpr" data-title="Spark基础环境配置" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%EF%BC%8CJDK%EF%BC%8CHadoop%EF%BC%8CZookeeper/" rel="tag">基础环境，JDK，Hadoop，Zookeeper</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/06/03/Spark2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Spark local&amp; stand-alone 配置
        
      </div>
    </a>
  
  
    <a href="/2024/06/03/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark-HA-%EF%BC%8CSpark-Yarn/" rel="tag">Spark(HA)，Spark(Yarn)</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark-local-%EF%BC%8CSpark-stand-alone/" rel="tag">Spark(local)，Spark(stand-alone)</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%EF%BC%8CJDK%EF%BC%8CHadoop%EF%BC%8CZookeeper/" rel="tag">基础环境，JDK，Hadoop，Zookeeper</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Spark-HA-%EF%BC%8CSpark-Yarn/" style="font-size: 10px;">Spark(HA)，Spark(Yarn)</a> <a href="/tags/Spark-local-%EF%BC%8CSpark-stand-alone/" style="font-size: 10px;">Spark(local)，Spark(stand-alone)</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%EF%BC%8CJDK%EF%BC%8CHadoop%EF%BC%8CZookeeper/" style="font-size: 10px;">基础环境，JDK，Hadoop，Zookeeper</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/06/03/Spark3/">《Spark HA &amp; Yarn 配置》</a>
          </li>
        
          <li>
            <a href="/2024/06/03/Spark2/">Spark local&amp; stand-alone 配置</a>
          </li>
        
          <li>
            <a href="/2024/06/03/Spark1/">Spark基础环境配置</a>
          </li>
        
          <li>
            <a href="/2024/06/03/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>